// tldts.min.js - Domain name parsing library
var tldts = (function () {
  "use strict";

  function getDomain(hostname) {
    if (!hostname) return null;

    // Simple domain extraction
    var parts = hostname.toLowerCase().split(".");

    // Handle IP addresses and localhost
    if (/^[0-9.]+$/.test(hostname) || hostname === "localhost") {
      return hostname;
    }

    // If we have only one or two parts, the domain is the hostname
    if (parts.length <= 2) {
      return hostname;
    }

    // Otherwise, take the last two parts as the domain
    return parts.slice(-2).join(".");
  }

  return {
    // Main parsing function
    parse: function (url) {
      var hostname = url;

      // Extract hostname from URL if needed
      if (url.indexOf("://") > -1) {
        hostname = url.split("/")[2];
      } else if (url.indexOf("//") === 0) {
        hostname = url.split("/")[2];
      }

      // Remove port number if present
      hostname = hostname ? hostname.split(":")[0] : "";

      // Remove path if present
      hostname = hostname.split("/")[0];

      // Get domain from hostname
      var domain = getDomain(hostname);

      return {
        hostname: hostname,
        domain: domain,
        isIp: /^[0-9.]+$/.test(hostname),
      };
    },

    // Helper methods
    getDomain: function (url) {
      return this.parse(url).domain;
    },

    getHostname: function (url) {
      if (!url) return null;

      // Extract hostname from URL if needed
      if (url.indexOf("://") > -1) {
        return url.split("/")[2] ? url.split("/")[2].split(":")[0] : null;
      } else if (url.indexOf("//") === 0) {
        return url.split("/")[2] ? url.split("/")[2].split(":")[0] : null;
      }

      return url.split(":")[0].split("/")[0];
    },
  };
})();

// Export for various module systems
if (typeof module !== "undefined" && module.exports) {
  module.exports = tldts;
} else if (typeof define === "function" && define.amd) {
  define([], function () {
    return tldts;
  });
} else {
  window.tldts = tldts;
}
