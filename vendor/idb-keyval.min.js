var idbKeyval = (function (e) {
  "use strict";
  function t(e) {
    return new Promise((t, n) => {
      (e.oncomplete = e.onsuccess = () => t(e.result)),
        (e.onabort = e.onerror = () => n(e.error));
    });
  }
  function n(e, n, o) {
    const r = indexedDB.open(e);
    r.onupgradeneeded = () => r.result.createObjectStore(n);
    const i = t(r);
    return o(
      i.then((e) => ({
        store: (t) =>
          t(
            e
              .transaction(n, t === "readonly" ? "readonly" : "readwrite")
              .objectStore(n)
          ),
        db: e,
      }))
    );
  }
  let o;
  function r() {
    return o || (o = n("keyval-store", "keyval", (e) => e)), o;
  }
  function i(e, n) {
    return (
      (e.openCursor().onsuccess = function () {
        this.result && (n(this.result), this.result.continue());
      }),
      t(e.transaction)
    );
  }
  return (
    (e.clear = async function (e = r()) {
      return (await e).store((e) => e.clear());
    }),
    (e.createStore = n),
    (e.del = async function (e, t = r()) {
      return (await t).store((t) => t.delete(e));
    }),
    (e.entries = async function (e = r()) {
      const t = [],
        n = (await e).store((e) =>
          i(e, (e) => {
            t.push([e.key, e.value]);
          })
        );
      return await n, t;
    }),
    (e.get = async function (e, n = r()) {
      return (await n).store((n) => n.get(e));
    }),
    (e.getMany = async function (e, t = r()) {
      const n = (await t).store((t) => Promise.all(e.map((e) => t.get(e))));
      return (await n).filter((e) => void 0 !== e);
    }),
    (e.keys = async function (e = r()) {
      const t = [];
      await (await e).store((e) => i(e, (e) => t.push(e.key)));
      return t;
    }),
    (e.promisifyRequest = t),
    (e.set = async function (e, t, n = r()) {
      return (await n).store((n) => {
        n.put(t, e);
      });
    }),
    (e.setMany = async function (e, t = r()) {
      return (await t).store((t) => {
        e.forEach((e) => t.put(e[1], e[0]));
      });
    }),
    (e.update = async function (e, t, n = r()) {
      return (await n).store((n) => {
        const o = n.get(e);
        o.onsuccess = () => {
          n.put(t(o.result), e);
        };
      });
    }),
    (e.values = async function (e = r()) {
      const t = [];
      await (await e).store((e) => i(e, (e) => t.push(e.value)));
      return t;
    }),
    e
  );
})({});
